{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/agente-ia-tpf/src/components/SidebarItem.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport { FiEdit, FiTrash2 } from \"react-icons/fi\";\nimport \"../style/side-bar-Item.css\";\n\nexport default function SidebarItem({\n  conversation,\n  onRename,\n  onDelete,\n  onSelect,\n  isActive,\n}) {\n  const [showMenu, setShowMenu] = useState(false);\n  const [position, setPosition] = useState({ top: 0, left: 0 });\n  const buttonRef = useRef(null); // referência do botão \"⋮\"\n  const menuRef = useRef(null); // referência do dropdown (portal)\n\n  const openMenu = (e) => {\n    e.stopPropagation();\n    if (buttonRef.current) {\n      const rect = buttonRef.current.getBoundingClientRect();\n      setPosition({\n        top: rect.top + window.scrollY,   // posição no documento\n        left: rect.right + 12,            // à direita da sidebar\n      });\n    }\n    setShowMenu(true);\n  };\n\n  const closeMenu = () => setShowMenu(false);\n\n  const toggleMenu = (e) => {\n    e.stopPropagation();\n    if (showMenu) closeMenu();\n    else openMenu(e);\n  };\n\n  const handleRename = (e) => {\n    e.stopPropagation();\n    // opcional: console.log para debug\n    // console.log(\"clicou renomear\", conversation);\n    onRename?.(conversation);\n    closeMenu();\n  };\n\n  const handleDelete = (e) => {\n    e.stopPropagation();\n    // console.log(\"clicou excluir\", conversation);\n    onDelete?.(conversation);\n    closeMenu();\n  };\n\n  // Fecha ao clicar fora OU tocar (considera menuRef + buttonRef)\n  useEffect(() => {\n    const handleClickOutside = (e) => {\n      const target = e.target;\n      // se não está nem no botão nem no menu, fechar\n      if (\n        buttonRef.current &&\n        !buttonRef.current.contains(target) &&\n        menuRef.current &&\n        !menuRef.current.contains(target)\n      ) {\n        setShowMenu(false);\n      }\n    };\n\n    const handleEscape = (e) => {\n      if (e.key === \"Escape\") setShowMenu(false);\n    };\n\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    document.addEventListener(\"touchstart\", handleClickOutside);\n    document.addEventListener(\"keydown\", handleEscape);\n    return () => {\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n      document.removeEventListener(\"touchstart\", handleClickOutside);\n      document.removeEventListener(\"keydown\", handleEscape);\n    };\n  }, []);\n\n  // Atualiza posição se a janela rolar ou redimensionar enquanto o menu está aberto\n  useEffect(() => {\n    if (!showMenu) return;\n    const updatePos = () => {\n      if (!buttonRef.current) return;\n      const rect = buttonRef.current.getBoundingClientRect();\n      setPosition({\n        top: rect.top + window.scrollY,\n        left: rect.right + 12,\n      });\n    };\n    window.addEventListener(\"scroll\", updatePos, { passive: true });\n    window.addEventListener(\"resize\", updatePos);\n    return () => {\n      window.removeEventListener(\"scroll\", updatePos);\n      window.removeEventListener(\"resize\", updatePos);\n    };\n  }, [showMenu]);\n\n  return (\n    <>\n      <div\n        className={`sidebar-item ${isActive ? \"active\" : \"\"}`}\n        onClick={() => onSelect?.(conversation)}\n      >\n        <span className=\"sidebar-text\">\n          {conversation.title || \"Chat sem nome\"}\n        </span>\n\n        {/* botão que abre o menu */}\n        <div\n          className=\"dots-menu\"\n          ref={buttonRef}\n          onClick={toggleMenu}\n          role=\"button\"\n          aria-haspopup=\"menu\"\n          aria-expanded={showMenu}\n        >\n          <span className=\"dots\">⋮</span>\n        </div>\n      </div>\n\n      {/* portal do dropdown - menuRef permite detectar cliques dentro dele */}\n      {showMenu &&\n        createPortal(\n          <div\n            className=\"floating-dropdown\"\n            ref={menuRef}\n            style={{\n              position: \"absolute\",\n              top: `${position.top}px`,\n              left: `${position.left}px`,\n              zIndex: 99999,\n            }}\n            role=\"menu\"\n          >\n            <p\n              onClick={handleRename}\n              role=\"menuitem\"\n              tabIndex={0}\n              onKeyDown={(e) =>\n                (e.key === \"Enter\" || e.key === \" \") && handleRename(e)\n              }\n            >\n              <FiEdit className=\"icon\" /> Renomear\n            </p>\n            <p\n              onClick={handleDelete}\n              role=\"menuitem\"\n              tabIndex={0}\n              onKeyDown={(e) =>\n                (e.key === \"Enter\" || e.key === \" \") && handleDelete(e)\n              }\n            >\n              <FiTrash2 className=\"icon\" /> Excluir\n            </p>\n          </div>,\n          document.body\n        )}\n    </>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 208, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/agente-ia-tpf/src/components/Modal.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport \"../style/modal.css\";\n\nexport default function Modal({ type, chatTitle, onClose, onConfirm }) {\n  const [newTitle, setNewTitle] = useState(chatTitle || \"\");\n  const inputRef = useRef(null);\n  const isRename = type === \"renomear\";\n  const isDelete = type === \"excluir\";\n\n  useEffect(() => {\n    if (isRename) inputRef.current?.focus();\n\n    const handleEsc = (e) => {\n      if (e.key === \"Escape\") onClose();\n    };\n    document.addEventListener(\"keydown\", handleEsc);\n    return () => document.removeEventListener(\"keydown\", handleEsc);\n  }, [isRename, onClose]);\n\n  const handleConfirm = () => {\n    if (isRename && !newTitle.trim()) return;\n    onConfirm(isRename ? newTitle.trim() : undefined);\n  };\n\n  return (\n    <div className=\"modal-overlay\">\n      <div className=\"modal modal-animate\" role=\"dialog\" aria-modal=\"true\">\n        {isDelete && <p>Deseja realmente excluir o chat \"{chatTitle}\" ? Essa ação é irreversível e as mensagens\n              desse chat serão apagadas</p>}\n        {isRename && (\n          <>\n            <p>Renomear chat:</p>\n            <input\n              ref={inputRef}\n              type=\"text\"\n              value={newTitle}\n              onChange={(e) => setNewTitle(e.target.value)}\n              onKeyPress={(e) => e.key === \"Enter\" && handleConfirm()}\n              maxLength={50}\n            />\n          </>\n        )}\n        <div className=\"modal-actions\">\n          <button className=\"cancelar\" onClick={onClose}>Cancelar</button>\n        <button\n          className=\"confirm\"\n          onClick={() => onConfirm(isRename ? newTitle.trim() : undefined)}\n        >\n          {isDelete ? \"Confirmar Exclusão\" : \"Salvar Novo Nome\"}\n        </button>\n\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;;;;AAGe,SAAS,MAAM,EAAE,IAAI,EAAE,SAAS,EAAE,OAAO,EAAE,SAAS,EAAE;IACnE,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC,aAAa;IACtD,MAAM,WAAW,IAAA,+MAAM,EAAC;IACxB,MAAM,WAAW,SAAS;IAC1B,MAAM,WAAW,SAAS;IAE1B,IAAA,kNAAS,EAAC;QACR,IAAI,UAAU,SAAS,OAAO,EAAE;QAEhC,MAAM,YAAY,CAAC;YACjB,IAAI,EAAE,GAAG,KAAK,UAAU;QAC1B;QACA,SAAS,gBAAgB,CAAC,WAAW;QACrC,OAAO,IAAM,SAAS,mBAAmB,CAAC,WAAW;IACvD,GAAG;QAAC;QAAU;KAAQ;IAEtB,MAAM,gBAAgB;QACpB,IAAI,YAAY,CAAC,SAAS,IAAI,IAAI;QAClC,UAAU,WAAW,SAAS,IAAI,KAAK;IACzC;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;YAAsB,MAAK;YAAS,cAAW;;gBAC3D,0BAAY,8OAAC;;wBAAE;wBAAkC;wBAAU;;;;;;;gBAE3D,0BACC;;sCACE,8OAAC;sCAAE;;;;;;sCACH,8OAAC;4BACC,KAAK;4BACL,MAAK;4BACL,OAAO;4BACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;4BAC3C,YAAY,CAAC,IAAM,EAAE,GAAG,KAAK,WAAW;4BACxC,WAAW;;;;;;;;8BAIjB,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAO,WAAU;4BAAW,SAAS;sCAAS;;;;;;sCACjD,8OAAC;4BACC,WAAU;4BACV,SAAS,IAAM,UAAU,WAAW,SAAS,IAAI,KAAK;sCAErD,WAAW,uBAAuB;;;;;;;;;;;;;;;;;;;;;;;AAO7C","debugId":null}},
    {"offset": {"line": 321, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/agente-ia-tpf/src/api/Api.js"],"sourcesContent":["const API_BASE_URL = \"https://agente-ia-squad42.onrender.com\";\n\n// Função para pegar token do localStorage. Estava com problemas para autenticar\nconst getToken = () => {\n    const token = localStorage.getItem(\"token\");\n    if (!token) throw new Error(\"Token não encontrado. Faça login novamente.\");\n    return token;\n};\n\n// Função para tratar respostas HTTP\nconst handleResponse = async (res) => {\n    if (!res.ok) {\n        const text = await res.text();\n        throw new Error(`Erro ${res.status}: ${text || res.statusText}`);\n    }\n    try {\n        return res.json();\n    } catch {\n        return null;\n    }\n};\n\n// Função auxiliar para requisições com token\nconst fetchWithToken = async (url, options = {}) => {\n    const token = getToken();\n    const headers = { Authorization: `Bearer ${token}`, ...(options.headers || {}) };\n    const res = await fetch(url, { ...options, headers });\n    return handleResponse(res);\n};\n\n\n\nexport const api = {\n\n\n    /** Login */\n    login: async (email, password) => {\n        if (!email || !password) throw new Error(\"Email e senha são obrigatórios.\");\n        const res = await fetch(`${API_BASE_URL}/api/auth/login`, {\n            method: \"POST\",\n            headers: { \"Content-Type\": \"application/json\" },\n            body: JSON.stringify({ email, password }),\n        });\n        const data = await handleResponse(res);\n\n        if (data.access_token) {\n            localStorage.setItem(\"token\", data.access_token);\n        } else {\n            throw new Error(\"Token não retornado pelo servidor.\");\n        }\n\n        return data;\n    },\n\n    /** Registro */\n    register: async (name, email, password) => {\n        if (!name || !email || !password) {\n            throw new Error(\"Nome completo, email e senha são obrigatórios.\");\n        }\n\n        const res = await fetch(`${API_BASE_URL}/api/auth/register`, {\n            method: \"POST\",\n            headers: { \"Content-Type\": \"application/json\" },\n            body: JSON.stringify({ name, email, password }),\n        });\n\n        return handleResponse(res);\n    },\n\n    /** Logout */\n    logout: () => {\n        localStorage.removeItem(\"token\");\n        window.location.href = \"/auth/login\";\n    },\n    /*informações do user*/\n    getProfile: async () => {\n        return fetchWithToken(`${API_BASE_URL}/api/auth/profile`);\n    },\n\n\n    /** rota das conversas*/\n\n\n    getConversations: async () => {\n        return fetchWithToken(`${API_BASE_URL}/api/chat/conversations`);\n    },\n\n    getConversationHistory: async (conversationId) => {\n        if (!conversationId) throw new Error(\"ID da conversa é obrigatório.\");\n        return fetchWithToken(`${API_BASE_URL}/api/chat/conversations/${conversationId}`);\n    },\n\n    renameConversation: async (conversationId, newTitle) => {\n        if (!conversationId || !newTitle) throw new Error(\"ID e título são obrigatórios\");\n\n        const url = `${API_BASE_URL}/api/chat/conversations/${conversationId}/rename`;\n\n        return fetchWithToken(url, {\n            method: \"PUT\",\n            headers: { \"Content-Type\": \"application/json\" },\n            body: JSON.stringify({ new_title: newTitle }),\n        });\n    },\n\n    deleteConversation: async (conversationId) => {\n        if (!conversationId) throw new Error(\"ID da conversa obrigatório\");\n        return fetchWithToken(`${API_BASE_URL}/api/chat/conversations/${conversationId}`, {\n            method: \"DELETE\",\n        });\n    },\n\n    /** Fiz uma logica para enviar a mensagem o documento e o template */\n\n    sendMessage: async (\n        prompt,\n        conversationId = null,\n        attachedDocumentId = null,\n        templateId = null\n    ) => {\n        if (!prompt) throw new Error(\"Mensagem não pode ser vazia.\");\n        const url = `${API_BASE_URL}/api/chat/conversations`;\n\n        const requestBody = {\n            prompt: prompt,\n        };\n        if (conversationId) {\n            requestBody.conversation_id = conversationId;\n        }\n        if (attachedDocumentId) {\n            requestBody.input_document_id = attachedDocumentId;\n        }\n        if (templateId) {\n            requestBody.template_id = templateId;\n        }\n\n        const data = await fetchWithToken(url, {\n            method: \"POST\",\n            headers: { \"Content-Type\": \"application/json\" },\n            body: JSON.stringify(requestBody),\n        });\n\n        return data;\n    },\n    /**para lista os templates disponiveis **/\n    getTemplates: async () => {\n        return fetchWithToken(`${API_BASE_URL}/api/templates`);\n    },\n\n    /** rotas dos documentos */\n    uploadDocument: async (file) => {\n        if (!file) throw new Error(\"Arquivo não selecionado.\");\n        const formData = new FormData();\n        formData.append(\"file\", file);\n        return fetchWithToken(`${API_BASE_URL}/api/documents/upload`, {\n            method: \"POST\",\n            body: formData,\n        });\n    },\n\n    getDocuments: async () => {\n        return fetchWithToken(`${API_BASE_URL}/api/documents`);\n    },\n\n    getDocumentMetadata: async (gridfsFileId) => {\n        if (!gridfsFileId) throw new Error(\"ID do arquivo é obrigatório.\");\n        const token = getToken();\n\n        const res = await fetch(`${API_BASE_URL}/api/files/${gridfsFileId}`, {\n            headers: { Authorization: `Bearer ${token}` },\n        });\n        if (!res.ok) {\n            const status = res.status;\n            let errorText = `Erro HTTP: ${status}.`;\n            throw new Error(`Falha ao baixar arquivo. ${errorText}`);\n        }\n\n        return res.blob();\n    },\n};"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 487, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/agente-ia-tpf/src/components/DocumentLink.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { api } from '../api/Api';\nimport { FaDownload } from 'react-icons/fa';\n\n/Area para baixar / \nexport default function DocumentLink({ documentId }) {\n    const [gridfsId, setGridfsId] = useState(null);\n    const [fileName, setFileName] = useState(\"Documento Gerado\");\n    const [isLoading, setIsLoading] = useState(true);\n\n    useEffect(() => {\n        const fetchFileMetadata = async () => {\n            if (!documentId) return;\n\n            try {\n                const metadata = await api.getDocumentMetadata(documentId);\n                setGridfsId(metadata.gridfs_file_id);\n                setFileName(metadata.filename || \"Documento Gerado\");\n            } catch (error) {\n                console.error(\"Erro ao buscar metadados do arquivo:\", error);\n            } finally {\n                setIsLoading(false);\n            }\n        };\n        fetchFileMetadata();\n    }, [documentId]);\n\n    if (isLoading) {\n        return <small>Carregando link do documento...</small>;\n    }\n\n    if (!gridfsId) {\n        return <small>Link de download indisponível.</small>;\n    }\n\n    return (\n        <a\n            href={`${api.API_BASE_URL}/api/files/${gridfsId}`}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className=\"document-download-link\"\n        >\n            <FaDownload /> Baixar: {fileName}\n        </a>\n    );\n}"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;;AAEA;AACe,SAAS,aAAa,EAAE,UAAU,EAAE;IAC/C,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAE3C,IAAA,kNAAS,EAAC;QACN,MAAM,oBAAoB;YACtB,IAAI,CAAC,YAAY;YAEjB,IAAI;gBACA,MAAM,WAAW,MAAM,wHAAG,CAAC,mBAAmB,CAAC;gBAC/C,YAAY,SAAS,cAAc;gBACnC,YAAY,SAAS,QAAQ,IAAI;YACrC,EAAE,OAAO,OAAO;gBACZ,QAAQ,KAAK,CAAC,wCAAwC;YAC1D,SAAU;gBACN,aAAa;YACjB;QACJ;QACA;IACJ,GAAG;QAAC;KAAW;IAEf,IAAI,WAAW;QACX,qBAAO,8OAAC;sBAAM;;;;;;IAClB;IAEA,IAAI,CAAC,UAAU;QACX,qBAAO,8OAAC;sBAAM;;;;;;IAClB;IAEA,qBACI,8OAAC;QACG,MAAM,GAAG,wHAAG,CAAC,YAAY,CAAC,WAAW,EAAE,UAAU;QACjD,QAAO;QACP,KAAI;QACJ,WAAU;;0BAEV,8OAAC,4JAAU;;;;;YAAG;YAAU;;;;;;;AAGpC","debugId":null}},
    {"offset": {"line": 563, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/agente-ia-tpf/src/components/AddFileModal.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { MdOutlineClose, MdDriveFolderUpload, MdDescription } from \"react-icons/md\";\nimport { api } from \"../api/Api\";\nimport \"../style/add-file.css\";\n\nexport default function AddFileModal({ onFileUploaded, onClose, activeConversation }) {\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [templates, setTemplates] = useState([]);\n  const [uploadedFile, setUploadedFile] = useState(null);\n  const [selectedTemplate, setSelectedTemplate] = useState(null);\n  const [currentStep, setCurrentStep] = useState(1);\n\n  useEffect(() => {\n    if (currentStep === 2) {\n      loadTemplates();\n    }\n  }, [currentStep]);\n\n  const loadTemplates = async () => {\n    try {\n      setIsLoading(true);\n      const templatesData = await api.getTemplates();\n      setTemplates(templatesData || []);\n    } catch (err) {\n      console.error(\"Erro ao carregar templates:\", err);\n      setError(\"Erro ao carregar templates. Tente novamente.\");\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleFileUpload = async (file) => {\n    if (!file || !activeConversation) {\n      setError(\"Selecione um arquivo e verifique a conversa ativa.\");\n      return;\n    }\n\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      const data = await api.uploadDocument(file);\n      const documentId = data?.document?._id || data?._id;\n\n      if (!documentId) {\n        throw new Error(\"ID do documento não recebido da API.\");\n      }\n\n      setUploadedFile({\n        id: documentId,\n        name: file.name,\n        file: file\n      });\n\n      // Avançar para seleção de template\n      setCurrentStep(2);\n\n    } catch (err) {\n      console.error(\"Erro no upload do arquivo:\", err);\n      setError(err.message || \"Erro ao enviar arquivo.\");\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleFileChange = (e) => {\n    const file = e.target.files[0];\n    if (file) {\n      handleFileUpload(file);\n    }\n  };\n\n  const handleTemplateSelect = async (template) => {\n    if (!uploadedFile) return;\n\n    try {\n      // Aqui você envia tanto o documento quanto o template \n      const processingData = {\n        documentId: uploadedFile.id,\n        templateId: template._id,\n        fileName: uploadedFile.name,\n        templateName: template.name\n      };\n\n      console.log(\"Processando:\", processingData);\n\n      // Chama a função de callback com ambos os IDs\n      if (onFileUploaded) {\n        onFileUploaded(uploadedFile.id, uploadedFile.name, template._id);\n      }\n\n      onClose();\n\n    } catch (err) {\n      console.error(\"Erro ao processar:\", err);\n      setError(\"Erro ao selecionar template.\");\n    }\n  };\n\n  const goBackToUpload = () => {\n    setCurrentStep(1);\n    setUploadedFile(null);\n    setSelectedTemplate(null);\n    setError(null);\n  };\n\n  return (\n    <div className=\"modal-overlay\">\n      <div className=\"modal add-file-modal modal-animate\">\n        <div className=\"modal-header\">\n          <h3>\n            {currentStep === 1 ? \"Enviar Arquivo\" : \"Selecionar Template\"}\n          </h3>\n          <button className=\"close-modal-btn\" onClick={onClose}>\n            <MdOutlineClose />\n          </button>\n        </div>\n\n        <div className=\"modal-steps\">\n          <div className=\"step-indicator\">\n            <div className={`step ${currentStep >= 1 ? 'active' : ''}`}>\n              <span>1</span>\n              Upload\n            </div>\n            <div className=\"step-connector\"></div>\n            <div className={`step ${currentStep >= 2 ? 'active' : ''}`}>\n              <span>2</span>\n              Template\n            </div>\n          </div>\n        </div>\n\n        <div className=\"modal-content\">\n          {error && <p className=\"error-message\">{error}</p>}\n\n          {/* PASSO 1: UPLOAD DO ARQUIVO */}\n          {currentStep === 1 && (\n            <div className=\"upload-section\">\n              <p className=\"modal-description\">\n                Faça upload do arquivo que você deseja processar (DOC, DOCX, XLSX, etc.)\n              </p>\n\n              <label className={`file-upload-label ${isLoading ? \"disabled\" : \"\"}`}>\n                <MdDriveFolderUpload className=\"upload-icon\" />\n                <span>{isLoading ? \"Enviando...\" : \"Escolher Arquivo\"}</span>\n                <input\n                  type=\"file\"\n                  onChange={handleFileChange}\n                  disabled={isLoading}\n                  style={{ display: \"none\" }}\n                  accept=\".doc,.docx,.xlsx,.xls,.pdf,.txt\"\n                />\n              </label>\n\n              <div className=\"supported-formats\">\n                <small>Formatos suportados: DOC, DOCX, XLSX, XLS, PDF, TXT</small>\n              </div>\n            </div>\n          )}\n\n          {/* PASSO 2: SELEÇÃO DO TEMPLATE */}\n          {currentStep === 2 && uploadedFile && (\n            <div className=\"templates-section\">\n              <div className=\"uploaded-file-info\">\n                <MdDescription className=\"file-icon\" />\n                <div className=\"file-details\">\n                  <span className=\"file-name\">{uploadedFile.name}</span>\n                  <span className=\"file-status\">✓ Arquivo enviado com sucesso</span>\n                </div>\n                <button className=\"change-file-btn\" onClick={goBackToUpload}>\n                  Alterar\n                </button>\n              </div>\n\n              <p className=\"modal-description\">\n                Selecione um template para processar o arquivo:\n              </p>\n\n              {isLoading ? (\n                <div className=\"loading-templates\">\n                  <p>Carregando templates...</p>\n                </div>\n              ) : (\n                <div className=\"templates-list\">\n                  {templates.map(template => (\n                    <div\n                      key={template._id}\n                      className={`template_name ${selectedTemplate?._id === template._id ? \"selected\" : \"\"}`}\n                      onClick={() => handleTemplateSelect(template)}\n                    >\n                      <MdDescription className=\"template-icon\" />\n                      <div className=\"template-info\">\n                        <span className=\"template-name\">\n                          {template.name}\n                        </span>\n                        {template.description && (\n                          <span className=\"template-description\">\n                            {template.description}\n                          </span>\n                        )}\n                      </div>\n                    </div>\n                  ))}\n\n                  {templates.length === 0 && (\n                    <div className=\"no-templates\">\n                      <MdDescription className=\"no-templates-icon\" />\n                      <p>Nenhum template disponível</p>\n                      <small>Entre em contato com o administrador para adicionar templates.</small>\n                    </div>\n                  )}\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1014, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/agente-ia-tpf/src/components/MenuPerfil.js"],"sourcesContent":["import React from \"react\";\nimport \"../style/menu-perfil.css\";\n\nexport default function MenuPerfil({ onLogout, userEmail }) {\n  const handleLogout = () => {\n    if (typeof onLogout === \"function\") onLogout();\n  };\n\n  return (\n    <div className=\"profile-menu\">\n      <div className=\"profile-info\">\n        <span>{userEmail}</span>\n      </div>\n      <button className=\"profile-option\" onClick={handleLogout} type=\"button\">\n        <span>Sair</span>\n      </button>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;;;;AAGe,SAAS,WAAW,EAAE,QAAQ,EAAE,SAAS,EAAE;IACxD,MAAM,eAAe;QACnB,IAAI,OAAO,aAAa,YAAY;IACtC;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;8BAAM;;;;;;;;;;;0BAET,8OAAC;gBAAO,WAAU;gBAAiB,SAAS;gBAAc,MAAK;0BAC7D,cAAA,8OAAC;8BAAK;;;;;;;;;;;;;;;;;AAId","debugId":null}},
    {"offset": {"line": 1071, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/agente-ia-tpf/src/components/File.js"],"sourcesContent":["// components/FileAttachment.js\nimport React from \"react\";\nimport { MdClose, MdDescription } from \"react-icons/md\";\nimport \"../style/file.css\";\n\nexport default function FileAttachment({ \n  documentId, \n  fileName, \n  onRemove,\n  showRemove = true \n}) {\n  const handleRemove = (e) => {\n    e.stopPropagation();\n    onRemove?.();\n  };\n\n  return (\n    <div className=\"file\">\n      <div className=\"file-info\">\n        <MdDescription className=\"file-icon\" />\n        <span className=\"file-name\" title={fileName}>\n          {fileName || `Documento ${documentId?.substring(0, 8)}`}\n        </span>\n      </div>\n      \n      {showRemove && (\n        <button \n          className=\"remove-file-btn\"\n          onClick={handleRemove}\n          title=\"Remover arquivo\"\n        >\n          <MdClose />\n        </button>\n      )}\n    </div>\n  );\n}"],"names":[],"mappings":"AAAA,+BAA+B;;;;;;AAC/B;AACA;;;;;AAGe,SAAS,eAAe,EACrC,UAAU,EACV,QAAQ,EACR,QAAQ,EACR,aAAa,IAAI,EAClB;IACC,MAAM,eAAe,CAAC;QACpB,EAAE,eAAe;QACjB;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,+JAAa;wBAAC,WAAU;;;;;;kCACzB,8OAAC;wBAAK,WAAU;wBAAY,OAAO;kCAChC,YAAY,CAAC,UAAU,EAAE,YAAY,UAAU,GAAG,IAAI;;;;;;;;;;;;YAI1D,4BACC,8OAAC;gBACC,WAAU;gBACV,SAAS;gBACT,OAAM;0BAEN,cAAA,8OAAC,yJAAO;;;;;;;;;;;;;;;;AAKlB","debugId":null}},
    {"offset": {"line": 1141, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/agente-ia-tpf/src/components/InputChat.js"],"sourcesContent":["// Aqui onde funciona boa parte da logica, enivar a mensagem, o arqui e o template\nimport React, { useState } from \"react\";\nimport { FiSend, FiPlus } from \"react-icons/fi\";\nimport { api } from \"../api/Api\";\nimport File from \"../components/File\";\nimport \"../style/chat.css\";\n\nexport default function InputChat({ activeConversation, onOpenAddFileModal, onMessageSent, attachedDocumentId, setAttachedDocumentId,attachedFileName,setAttachedFileName,attachedTemplateId,setAttachedTemplateId\n}) {\n  const [message, setMessage] = useState(\"\");\n  const [isSending, setIsSending] = useState(false);\n\n  const sendMessage = async () => {\n    const userPrompt = message.trim();\n    if (!activeConversation || (!userPrompt && !attachedDocumentId) || isSending) return;\n\n    setIsSending(true);\n    \n    try {\n      // Enviar mensagem do usuário com template se houver\n      onMessageSent?.({\n        sender: \"user\",\n        content: userPrompt || \"Processar arquivo com template\",\n        id: crypto.randomUUID(),\n        attachedDocumentId: attachedDocumentId,\n        attachedFileName: attachedFileName,\n        templateId: attachedTemplateId\n      });\n\n      const conversationId = activeConversation?._id || activeConversation?.id;\n      \n      // Enviar para API com templateId\n      const data = await api.sendMessage(\n        userPrompt || \"Processar este arquivo com o template selecionado\", \n        conversationId, \n        attachedDocumentId,\n        attachedTemplateId\n      );\n\n      // Limpar anexos após envio\n      setAttachedDocumentId(null);\n      setAttachedFileName(null);\n      setAttachedTemplateId(null);\n\n      onMessageSent?.({\n        sender: \"bot\",\n        content: data?.message_content || data?.content || \"Tudo pronto! Clique na conversa no histórico à esquerda para ver a resposta completa.\",\n        id: crypto.randomUUID(),\n        generated_document_id: data?.document_id,\n      });\n\n    } catch (err) {\n      console.error(\"Erro ao enviar mensagem:\", err);\n      \n      const errorMessage = \"Erro de conexão ou servidor. Tente novamente.\";\n\n      onMessageSent?.({ \n        sender: \"bot\", \n        content: errorMessage, \n        id: crypto.randomUUID() \n      });\n    } finally {\n      setIsSending(false);\n      setMessage(\"\");\n    }\n  };\n\n  const handleRemoveAttachment = () => {\n    setAttachedDocumentId(null);\n    setAttachedFileName(null);\n    setAttachedTemplateId(null);\n  };\n\n  const handleRemoveTemplateOnly = () => {\n    setAttachedTemplateId(null);\n  };\n\n  const handleKeyDown = (e) => {\n    if (e.key === \"Enter\" && !e.shiftKey) {\n      e.preventDefault(); \n      sendMessage();\n    }\n  };\n\n  const getPlaceholderText = () => {\n    if (attachedDocumentId && attachedTemplateId) return \"Digite instruções para processar o arquivo com o template...\";\n    if (attachedDocumentId) return \"Digite suas instruções para o documento...\";\n    if (isSending) return \"Aguardando resposta...\";\n    return \"Digite sua mensagem...\";\n  };\n    \n  return (\n    <div className=\"chat-input-container\">\n      {/* Área de anexo mostre arquivo e o template */}\n      {(attachedDocumentId || attachedTemplateId) && (\n        <div className=\"attachment-preview\">\n          {attachedDocumentId && (\n            <File\n              documentId={attachedDocumentId}\n              fileName={attachedFileName}\n              onRemove={handleRemoveAttachment}\n            />\n          )}\n          {attachedTemplateId && (\n            <div className=\"template-attachment\">\n              <div className=\"file-info\">\n                <span className=\"file-icon\">📄</span>\n                <span className=\"file-name\">Template selecionado</span>\n              </div>\n              <button \n                className=\"remove-file-btn\"\n                onClick={attachedDocumentId ? handleRemoveTemplateOnly : handleRemoveAttachment}\n                title=\"Remover template\"\n              >\n                ×\n              </button>\n            </div>\n          )}\n        </div>\n      )}\n      \n      {/* Input area */}\n      <div className={`chat-input ${(attachedDocumentId || attachedTemplateId) ? 'has-attachment' : ''}`}>\n        <button \n          className=\"add-file-btn\" \n          onClick={onOpenAddFileModal} \n          disabled={isSending}\n          title=\"Anexar arquivo e template\"\n        >\n          <FiPlus className={attachedDocumentId ? 'attached-icon' : ''} />\n        </button>\n    \n        <input\n          type=\"text\"\n          placeholder={getPlaceholderText()}\n          value={message}\n          onChange={(e) => setMessage(e.target.value)}\n          onKeyDown={handleKeyDown}\n          disabled={isSending}\n        />\n        \n        <button \n          className=\"send-btn\" \n          onClick={sendMessage} \n          disabled={isSending || (!message.trim() && !attachedDocumentId)}\n          title=\"Enviar mensagem\"\n        >\n          <FiSend />\n        </button>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1349, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/agente-ia-tpf/src/app/chat/page.js"],"sourcesContent":["\"use client\";\nimport React, { useState, useEffect, useRef } from \"react\";\nimport SidebarItem from \"../../components/SidebarItem\";\nimport Modal from \"../../components/Modal\";\nimport DocumentLink from \"../../components/DocumentLink\";\nimport AddFileModal from \"../../components/AddFileModal\";\nimport MenuPerfil from \"../../components/MenuPerfil\";\nimport InputChat from \"../../components/InputChat\";\nimport { FaUserCircle } from \"react-icons/fa\";\nimport { api } from \"../../api/Api\";\nimport \"../../style/chat.css\";\n\nexport default function ChatPage() {\n  const [conversations, setConversations] = useState([]);\n  const [activeConversation, setActiveConversation] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [user, setUser] = useState({ name: \"Carregando...\", email: \"carregando@email.com\" });\n  const [modal, setModal] = useState(null);\n  const [showMenuPerfil, setShowMenuPerfil] = useState(false);\n  const [showAddFileModal, setShowAddFileModal] = useState(false);\n\n  // Estados para gerenciar os anexos\n  const [attachedDocumentId, setAttachedDocumentId] = useState(null);\n  const [attachedFileName, setAttachedFileName] = useState(null);\n  const [attachedTemplateId, setAttachedTemplateId] = useState(null); // ← ESTADO ADICIONADO\n\n  const chatContainerRef = useRef(null);\n\n  // Carrega conversas e usuário ao abrir\n  useEffect(() => {\n    const load = async () => {\n      try {\n        const token = localStorage.getItem(\"token\");\n        if (!token) return;\n\n        const [convData, userData] = await Promise.all([\n          api.getConversations(),\n          api.getProfile(),\n        ]);\n\n        setConversations(convData);\n        setUser({ name: userData.name, email: userData.email });\n\n        if (convData.length) selectConversation(convData[0]);\n        else {\n          const newConvData = await api.sendMessage(\"Olá, TPF-AI!\");\n          setConversations((prev) => [newConvData.conversation, ...prev]);\n          selectConversation(newConvData.conversation);\n        }\n      } catch (err) {\n        console.error(\"Erro ao carregar chat:\", err.message);\n      }\n    };\n    load();\n  }, []);\n\n  useEffect(() => {\n    if (chatContainerRef.current)\n      chatContainerRef.current.scrollTop = chatContainerRef.current.scrollHeight;\n  }, [messages]);\n\n  // Função para selecionar uma conversa\n  const selectConversation = async (conversation) => {\n    setActiveConversation(conversation);\n    setAttachedDocumentId(null);\n    setAttachedFileName(null);\n    setAttachedTemplateId(null);\n    try {\n      const history = await api.getConversationHistory(conversation._id || conversation.id);\n      setMessages(history || []);\n    } catch {\n      setMessages([]);\n    }\n  };\n\n  // Funções de renomear e excluir\n  const handleRenameConversation = async (conversationId, newTitle) => {\n    if (!conversationId || !newTitle) return alert(\"Título obrigatório\");\n\n    try {\n      await api.renameConversation(conversationId, newTitle);\n      setConversations(prev =>\n        prev.map(c => (c._id === conversationId ? { ...c, title: newTitle } : c))\n      );\n      closeModal();\n    } catch (err) {\n      alert(\"Erro ao renomear: \" + err.message);\n    }\n  };\n\n  const handleDeleteConversation = async (conversationId) => {\n    if (!conversationId) return alert(\"ID da conversa não encontrado\");\n\n    try {\n      await api.deleteConversation(conversationId);\n      const newConversations = conversations.filter(c => c._id !== conversationId);\n      setConversations(newConversations);\n\n      if (activeConversation && activeConversation._id === conversationId) {\n        selectConversation(newConversations[0] || null);\n      }\n      closeModal();\n    } catch (err) {\n      alert(\"Erro ao excluir: \" + err.message);\n    }\n  };\n\n  const handleNewMessage = (msg) => setMessages(prev => [...prev, msg]);\n  const closeModal = () => setModal(null);\n  const onLogout = () => (window.location.href = \"/auth/login\");\n\n  const handleFileUploaded = (documentId, fileName, templateId) => {\n    setAttachedDocumentId(documentId);\n    setAttachedFileName(fileName);\n    setAttachedTemplateId(templateId);\n    setShowAddFileModal(false);\n\n    alert(`Arquivo \"${fileName}\" e template selecionado! Digite suas instruções.`);\n  };\n\n  return (\n    <div className=\"chat-container\">\n      {/* Sidebar */}\n      <aside className=\"sidebar\">\n        <h1 className=\"logo\">TPF<span>-AI</span></h1>\n\n        <button\n          className=\"new-chat\"\n          onClick={async () => {\n            try {\n              setActiveConversation(null);\n              setMessages([]);\n              setAttachedDocumentId(null);\n              setAttachedFileName(null);\n              setAttachedTemplateId(null); \n\n              const apiResponse = await api.sendMessage(\"Novo chat iniciado\");\n\n              if (!apiResponse || !apiResponse.conversation_id) {\n                throw new Error(\"API não retornou o ID da nova conversa.\");\n              }\n              const newConvList = await api.getConversations();\n              const newConversation = newConvList.find(c => c._id === apiResponse.conversation_id) || newConvList[0];\n\n              if (!newConversation) {\n                throw new Error(\"Falha ao recuperar os dados da nova conversa.\");\n              }\n\n              setConversations(newConvList);\n              selectConversation(newConversation);\n\n            } catch (err) {\n              console.error(\"Erro ao criar novo chat:\", err.message);\n            }\n          }}\n        >\n          + Novo Chat\n        </button>\n\n        <h4>Histórico</h4>\n        <div className=\"chat-list\">\n          {conversations\n            .filter(conv => conv && conv._id)\n            .map((conv) => (\n              <SidebarItem\n                key={conv._id}\n                conversation={conv}\n                onRename={(conversation) =>\n                  setModal({ type: \"renomear\", chat: conversation })\n                }\n                onDelete={(conversation) =>\n                  setModal({ type: \"excluir\", chat: conversation })\n                }\n                onSelect={selectConversation}\n                isActive={activeConversation && activeConversation._id === conv._id}\n              />\n            ))}\n        </div>\n\n        <div className=\"user-profile\" onClick={() => setShowMenuPerfil(!showMenuPerfil)}>\n          <div className=\"user-icon-container\"><FaUserCircle size={32} color=\"#000000ff\" /></div>\n          <span>{user.name}</span>\n          {showMenuPerfil && <MenuPerfil onLogout={onLogout} userEmail={user.email} />}\n        </div>\n      </aside>\n\n      {/* Chat principal */}\n      <main className=\"chat-main\">\n       <div className=\"chat-messages\" ref={chatContainerRef}>\n          {messages.map((msg) => (\n            <div\n              key={msg._id || msg.id}\n              className={`message-bubble ${\n                msg.role === \"user\" || msg.sender === \"user\" ? \"user\" : \"bot\"\n              }`}\n            >\n              {msg.content}\n              {msg.document_id && <DocumentLink documentId={msg.document_id} />}\n            </div>\n          ))}\n        </div>\n\n        <InputChat\n          activeConversation={activeConversation}\n          onMessageSent={handleNewMessage}\n          onOpenAddFileModal={() => setShowAddFileModal(true)}\n          attachedDocumentId={attachedDocumentId}\n          setAttachedDocumentId={setAttachedDocumentId}\n          attachedFileName={attachedFileName}\n          setAttachedFileName={setAttachedFileName}\n          attachedTemplateId={attachedTemplateId}\n          setAttachedTemplateId={setAttachedTemplateId}\n        />\n      </main>\n\n      {/* Modais */}\n      {modal && modal.chat && (\n        <Modal\n          type={modal.type}\n          chatTitle={modal.chat.title}\n          onClose={closeModal}\n          onConfirm={\n            modal.type === \"renomear\"\n              ? (newTitle) => handleRenameConversation(modal.chat._id, newTitle)\n              : () => handleDeleteConversation(modal.chat._id)\n          }\n        />\n      )}\n\n      {showAddFileModal && (\n        <AddFileModal\n          onClose={() => setShowAddFileModal(false)}\n          activeConversation={activeConversation}\n          onFileUploaded={handleFileUploaded}\n        />\n      )}\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}}]
}